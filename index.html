<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø³ÙÙƒÙ‘Ø© Ø³Ù…Ø§Ø±Øª | Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø°ÙƒÙŠØ© - Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…ÙˆØ¯</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --main: #00f7ff; --pink: #ff007f; --green: #00ff88; --danger: #ff3e3e; --bg: #0d0f14; --glass: rgba(255, 255, 255, 0.05); }
        body { font-family: 'Cairo', sans-serif; background: var(--bg); color: white; margin: 0; padding: 0; overflow-x: hidden; }

        /* Ø´Ø§Ø´Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„ (ØªØ¸Ù‡Ø± ÙÙ‚Ø· Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©) */
        #loginOverlay { position: fixed; inset: 0; background: var(--bg); z-index: 2000; display: none; justify-content: center; align-items: center; padding: 20px; }
        .login-box { background: var(--glass); padding: 30px; border-radius: 25px; border: 1px solid var(--main); width: 100%; max-width: 400px; text-align: center; backdrop-filter: blur(20px); }

        header { background: rgba(22, 27, 34, 0.9); padding: 10px 20px; border-bottom: 1px solid var(--main); display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; }
        .logo { font-size: 20px; font-weight: 900; color: var(--main); }

        .main-app { display: grid; grid-template-columns: 1fr; gap: 15px; padding: 15px; box-sizing: border-box; }
        @media (min-width: 992px) { .main-app { grid-template-columns: 350px 1fr 380px; height: calc(100vh - 65px); overflow: hidden; } }
        
        .panel { background: var(--glass); border-radius: 25px; border: 1px solid rgba(255,255,255,0.1); display: flex; flex-direction: column; overflow: hidden; backdrop-filter: blur(10px); min-height: 250px; }
        .panel-h { background: rgba(255,255,255,0.05); padding: 12px; font-weight: 900; text-align: center; color: var(--main); font-size: 14px; }

        .map-container { position: relative; border-radius: 25px; overflow: hidden; border: 1px solid var(--main); height: 300px; }
        @media (min-width: 992px) { .map-container { height: auto; } }
        iframe { width: 100%; height: 100%; border: none; filter: brightness(0.8) invert(90%) hue-rotate(180deg); }

        input, select { width: 100%; background: #000; border: 1px solid #333; padding: 12px; border-radius: 50px; color: white; margin-bottom: 10px; font-family: 'Cairo'; box-sizing: border-box; }
        .btn-main { background: var(--main); color: #000; border: none; padding: 12px; border-radius: 50px; font-weight: bold; cursor: pointer; width: 100%; }

        .sec-log { background: #000; margin: 10px; padding: 12px; border-radius: 15px; font-family: monospace; font-size: 10px; color: var(--green); height: 120px; overflow-y: auto; border: 1px solid #222; }
        .features-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 12px; }
        .f-card { background: rgba(255,255,255,0.03); padding: 10px; border-radius: 18px; text-align: center; border: 1px solid #333; font-size: 11px; }
        .mic-btn { background: var(--main); color: #000; width: 45px; height: 45px; border-radius: 50%; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .recording { background: var(--danger) !important; animation: pulse 1s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
    </style>
</head>
<body onload="checkUser()">

<div id="loginOverlay">
    <div class="login-box">
        <h2 style="color:var(--main)">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø³ÙÙƒÙ‘Ø©</h2>
        <p style="font-size:12px; color:#aaa">Ø³Ø¬Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·</p>
        <input type="text" id="regName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„">
        <input type="tel" id="regPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„">
        <select id="regRole">
            <option value="Ø±Ø§ÙƒØ¨">Ø£Ù†Ø§ Ø±Ø§ÙƒØ¨</option>
            <option value="Ø³Ø§Ø¦Ù‚">Ø£Ù†Ø§ Ø³Ø§Ø¦Ù‚</option>
        </select>
        <button class="btn-main" onclick="saveUser()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…</button>
    </div>
</div>

<header>
    <div class="logo"><i class="fas fa-route"></i> Ø³ÙÙƒÙ‘Ø© SMART</div>
    <div id="userInfo" style="font-size: 11px; color: var(--green);"></div>
</header>

<div class="main-app">
    <div class="map-container">
        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d109439.46247345387!2d31.303102397265625!3d31.041381399999996!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x14f79db7a9053547%3A0xf8dab3bbed766c97!2sMansoura%2C%20Dakahlia%20Governorate!5e0!3m2!1sen!2seg!4v1700000000000!5m2!1sen!2seg"></iframe>
    </div>

    <div class="panel">
        <div class="panel-h">ğŸš€ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª ÙˆØ§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</div>
        <div class="features-grid">
            <div class="f-card" id="pinkMode" onclick="togglePink()"><i class="fas fa-venus" style="color:var(--pink)"></i>Ø³ÙŠØ¯Ø§Øª</div>
            <div class="f-card" onclick="qrGuard()"><i class="fas fa-qrcode"></i>Ø­Ù…Ø§ÙŠØ© QR</div>
            <div class="f-card" onclick="alert('Ù†Ù‚Ø§Ø·Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ©: 150 Ù†Ù‚Ø·Ø©')"><i class="fas fa-gas-pump" style="color:var(--gold)"></i>Ù†Ù‚Ø§Ø·ÙŠ</div>
            <div class="f-card" onclick="logout()"><i class="fas fa-sign-out-alt"></i>Ø®Ø±ÙˆØ¬</div>
        </div>
        <div style="padding:15px; background: rgba(0, 247, 255, 0.05);">
            <div id="aiMsg" style="font-size:11px; color:var(--main); margin-bottom:5px;">ØªØ­Ø¯Ø« Ù…Ø¹ÙŠ Ø§Ù„Ø¢Ù†..</div>
            <div style="display:flex; gap:10px;">
                <input type="text" id="aiIn" placeholder="Ø§Ø³Ø£Ù„ Ø¹Ù† Ø§Ù„Ù‚Ø·Ø±...">
                <button class="mic-btn" id="micBtn" onclick="startVoice()"><i class="fas fa-microphone"></i></button>
            </div>
        </div>
    </div>

    <div class="panel">
        <div class="panel-h">ğŸ•µï¸ Ø³Ø¬Ù„ Ø§Ù„Ø±Ù‚Ø§Ø¨Ø© (Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…ÙˆØ¯)</div>
        <div class="sec-log" id="secLog"></div>
    </div>
</div>

<script>
    // 1. ÙˆØ¸ÙŠÙØ© ÙØ­Øµ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ù‡Ù„ Ø³Ø¬Ù„ Ù‚Ø¨Ù„ ÙƒØ¯Ø©ØŸ)
    function checkUser() {
        const name = localStorage.getItem('sikka_name');
        if (name) {
            document.getElementById('userInfo').innerText = "Ø£Ù‡Ù„Ø§Ù‹ " + name;
            addLog(`[SYSTEM] ØªÙ… Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${name}`);
        } else {
            document.getElementById('loginOverlay').style.display = 'flex';
        }
    }

    // 2. Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©
    function saveUser() {
        const name = document.getElementById('regName').value;
        const phone = document.getElementById('regPhone').value;
        const role = document.getElementById('regRole').value;

        if (name && phone) {
            localStorage.setItem('sikka_name', name);
            localStorage.setItem('sikka_phone', phone);
            localStorage.setItem('sikka_role', role);
            
            document.getElementById('loginOverlay').style.display = 'none';
            document.getElementById('userInfo').innerText = "Ø£Ù‡Ù„Ø§Ù‹ " + name;
            addLog(`[REGISTRATION] Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯: ${name} (${role})`);
        } else {
            alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ÙƒØ§Ù…Ù„Ø©");
        }
    }

    function addLog(msg) {
        const log = document.getElementById('secLog');
        const time = new Date().toLocaleTimeString('ar-EG');
        log.innerHTML += `[${time}] ${msg}<br>`;
        log.scrollTop = log.scrollHeight;
    }

    function startVoice() {
        const btn = document.getElementById('micBtn');
        btn.classList.add('recording');
        setTimeout(() => {
            btn.classList.remove('recording');
            document.getElementById('aiIn').value = "Ù…ÙˆØ§Ø¹ÙŠØ¯ Ù‚Ø·Ø§Ø± Ø§Ù„Ù…Ù†ØµÙˆØ±Ø©";
            processAI("Ù…ÙˆØ§Ø¹ÙŠØ¯ Ù‚Ø·Ø§Ø± Ø§Ù„Ù…Ù†ØµÙˆØ±Ø©");
        }, 2000);
    }

    function processAI(query) {
        let reply = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† " + query;
        if(query.includes("Ù‚Ø·Ø±")) reply = "Ù‚Ø·Ø§Ø± Ø§Ù„Ù…Ù†ØµÙˆØ±Ø©-Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©: 7:00ØµØŒ 3:15Ø¸ØŒ 7:45Ù….";
        document.getElementById('aiMsg').innerText = "AI: " + reply;
        addLog(`[AI] Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ù†: ${query}`);
    }

    function togglePink() {
        document.getElementById('pinkMode').classList.toggle('pink-active');
        addLog("[SECURITY] ØªÙØ¹ÙŠÙ„ Ø±Ø§Ø¯Ø§Ø± Ø§Ù„Ø³ÙŠØ¯Ø§Øª.");
    }

    function qrGuard() {
        const code = prompt("Ø±Ù‚Ù… Ø§Ù„Ù…Ø±ÙƒØ¨Ø©:");
        if(code) addLog(`[QR-GUARD] ØªØªØ¨Ø¹ Ø§Ù„Ù…Ø±ÙƒØ¨Ø© ${code} Ù†Ø´Ø·.`);
    }

    function logout() {
        localStorage.clear();
        location.reload();
    }
</script>

</body>
</html>
